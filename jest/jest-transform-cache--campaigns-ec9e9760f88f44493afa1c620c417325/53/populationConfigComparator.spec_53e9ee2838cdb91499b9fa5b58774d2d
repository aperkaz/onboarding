'use strict';var assert = require('chai').assert;
var expect = require('chai').expect;
var _ = require('lodash');
var sortPopulationConfigs = require('./sortPopulationConfigs');

/**
                                                                 * Unit tests for sortPopulationConfigs
                                                                 */
describe('populationConfigComparator', function () {
  it('test dependency sorting', function () {
    var mockPopulationConfig = [
    {
      model: "a",
      dependsOn: "c" },

    {
      model: "b",
      dependsOn: "d" },

    {
      model: "c",
      dependsOn: "d" },

    {
      model: "d" }];


    mockPopulationConfig = sortPopulationConfigs(mockPopulationConfig);
    var aIdx = _.findIndex(mockPopulationConfig, { model: "a" });
    var bIdx = _.findIndex(mockPopulationConfig, { model: "b" });
    var cIdx = _.findIndex(mockPopulationConfig, { model: "c" });
    var dIdx = _.findIndex(mockPopulationConfig, { model: "d" });

    expect(aIdx).to.be.above(cIdx);
    expect(bIdx).to.be.above(dIdx);
    expect(cIdx).to.be.above(dIdx);
  });

  it('test sorting without dependencies', function () {
    var mockPopulationConfig = sortPopulationConfigs([
    {
      model: "a" },

    {
      model: "b" }]);


    assert.equal(_.findIndex(mockPopulationConfig, { model: "a" }), 0);
    assert.equal(_.findIndex(mockPopulationConfig, { model: "b" }), 1);
  });
});